<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Network-Level Privacy | Wasabi Docs</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#211b24">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata:400,700|Playfair+Display:700&amp;display=swap">
    <meta name="description" content="A comparison of the network-level privacy of Wasabi wallet and Bitcoin Core. This is the Wasabi documentation, an archive of knowledge about the open-source, non-custodial and privacy-focused Bitcoin wallet for desktop.">
    <meta name="msapplication-TileColor" content="#211b24">
    <meta name="theme-color" content="#211b24">
    
    <link rel="preload" href="/assets/css/0.styles.490d69e3.css" as="style"><link rel="preload" href="/assets/js/app.d3cd784f.js" as="script"><link rel="preload" href="/assets/js/3.91299871.js" as="script"><link rel="preload" href="/assets/js/50.500e7fd2.js" as="script"><link rel="prefetch" href="/assets/js/10.816088df.js"><link rel="prefetch" href="/assets/js/11.d94ed6cc.js"><link rel="prefetch" href="/assets/js/12.d75d7d94.js"><link rel="prefetch" href="/assets/js/13.23482a71.js"><link rel="prefetch" href="/assets/js/14.05191118.js"><link rel="prefetch" href="/assets/js/15.35b22d61.js"><link rel="prefetch" href="/assets/js/16.258ec5ad.js"><link rel="prefetch" href="/assets/js/17.ca623a3c.js"><link rel="prefetch" href="/assets/js/18.65aab39e.js"><link rel="prefetch" href="/assets/js/19.a6a58295.js"><link rel="prefetch" href="/assets/js/20.2932ab0b.js"><link rel="prefetch" href="/assets/js/21.92ddcd4e.js"><link rel="prefetch" href="/assets/js/22.357f1a49.js"><link rel="prefetch" href="/assets/js/23.47c4d18e.js"><link rel="prefetch" href="/assets/js/24.20433b31.js"><link rel="prefetch" href="/assets/js/25.c078489e.js"><link rel="prefetch" href="/assets/js/26.69d42397.js"><link rel="prefetch" href="/assets/js/27.0ac829b8.js"><link rel="prefetch" href="/assets/js/28.7b9c226a.js"><link rel="prefetch" href="/assets/js/29.252d4d6e.js"><link rel="prefetch" href="/assets/js/30.124846b5.js"><link rel="prefetch" href="/assets/js/31.7d10dedb.js"><link rel="prefetch" href="/assets/js/32.05656791.js"><link rel="prefetch" href="/assets/js/33.093576d2.js"><link rel="prefetch" href="/assets/js/34.454e2d4f.js"><link rel="prefetch" href="/assets/js/35.d7f7f26a.js"><link rel="prefetch" href="/assets/js/36.26437680.js"><link rel="prefetch" href="/assets/js/37.0a7bc873.js"><link rel="prefetch" href="/assets/js/38.56237d48.js"><link rel="prefetch" href="/assets/js/39.0030bfcf.js"><link rel="prefetch" href="/assets/js/4.ca8af797.js"><link rel="prefetch" href="/assets/js/40.36dae769.js"><link rel="prefetch" href="/assets/js/41.1539dac9.js"><link rel="prefetch" href="/assets/js/42.489082cd.js"><link rel="prefetch" href="/assets/js/43.2bd2af94.js"><link rel="prefetch" href="/assets/js/44.0d2c095e.js"><link rel="prefetch" href="/assets/js/45.99ed9429.js"><link rel="prefetch" href="/assets/js/46.83413ec1.js"><link rel="prefetch" href="/assets/js/47.91b8c2a2.js"><link rel="prefetch" href="/assets/js/48.d259d3d9.js"><link rel="prefetch" href="/assets/js/49.832fc73e.js"><link rel="prefetch" href="/assets/js/5.33d7afcb.js"><link rel="prefetch" href="/assets/js/51.d754843b.js"><link rel="prefetch" href="/assets/js/52.50479789.js"><link rel="prefetch" href="/assets/js/53.e97a3afe.js"><link rel="prefetch" href="/assets/js/54.4ae08a7e.js"><link rel="prefetch" href="/assets/js/55.6621d6e6.js"><link rel="prefetch" href="/assets/js/6.119d0441.js"><link rel="prefetch" href="/assets/js/7.6404862f.js"><link rel="prefetch" href="/assets/js/8.354ea820.js"><link rel="prefetch" href="/assets/js/9.4ae0bfcb.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.25c53924.js">
    <link rel="stylesheet" href="/assets/css/0.styles.490d69e3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/Logo_without_text.png" alt="Wasabi Docs" class="logo"> <span class="site-name can-hide">Wasabi Docs</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/why-wasabi/" class="nav-link router-link-active">
  Why Wasabi
</a></div><div class="nav-item"><a href="/using-wasabi/" class="nav-link">
  Using Wasabi
</a></div><div class="nav-item"><a href="/building-wasabi/" class="nav-link">
  Building Wasabi
</a></div><div class="nav-item"><a href="/FAQ/" class="nav-link">
  FAQ
</a></div><div class="nav-item"><a href="/glossary/" class="nav-link">
  Glossary
</a></div> <a href="https://github.com/zkSNACKs/WasabiDoc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/why-wasabi/" class="nav-link router-link-active">
  Why Wasabi
</a></div><div class="nav-item"><a href="/using-wasabi/" class="nav-link">
  Using Wasabi
</a></div><div class="nav-item"><a href="/building-wasabi/" class="nav-link">
  Building Wasabi
</a></div><div class="nav-item"><a href="/FAQ/" class="nav-link">
  FAQ
</a></div><div class="nav-item"><a href="/glossary/" class="nav-link">
  Glossary
</a></div> <a href="https://github.com/zkSNACKs/WasabiDoc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Why Privacy</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/why-wasabi/WhyPrivacyImportant.html" class="sidebar-link">Why Privacy is Important</a></li><li><a href="/why-wasabi/WhyFinancialPrivacy.html" class="sidebar-link">Why Financial Privacy is Especially Important</a></li><li><a href="/why-wasabi/LegalConcern.html" class="sidebar-link">CoinJoin Legal Concern</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Privacy in Bitcoin</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/why-wasabi/Coins.html" class="sidebar-link">Coins</a></li><li><a href="/why-wasabi/AddressReuse.html" class="sidebar-link">Address Reuse</a></li><li><a href="/why-wasabi/TransactionGraph.html" class="sidebar-link">Transaction Graph</a></li><li><a href="/why-wasabi/NetworkLevelPrivacy.html" aria-current="page" class="active sidebar-link">Network-Level Privacy</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/why-wasabi/NetworkLevelPrivacy.html#problem" class="sidebar-link">Problem</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/why-wasabi/NetworkLevelPrivacy.html#clearnet-light-clients" class="sidebar-link">Clearnet light clients</a></li></ul></li><li class="sidebar-sub-header"><a href="/why-wasabi/NetworkLevelPrivacy.html#wasabi-s-solution" class="sidebar-link">Wasabi's solution</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/why-wasabi/NetworkLevelPrivacy.html#full-node-by-default-block-filters-over-tor" class="sidebar-link">Full node by default &amp; block filters over Tor</a></li></ul></li><li class="sidebar-sub-header"><a href="/why-wasabi/NetworkLevelPrivacy.html#in-depth-comparison" class="sidebar-link">In-depth comparison</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/why-wasabi/NetworkLevelPrivacy.html#bitcoin-core" class="sidebar-link">Bitcoin Core</a></li><li class="sidebar-sub-header"><a href="/why-wasabi/NetworkLevelPrivacy.html#bitcoin-core-tor" class="sidebar-link">Bitcoin Core + Tor</a></li><li class="sidebar-sub-header"><a href="/why-wasabi/NetworkLevelPrivacy.html#wasabi-wallet-light-node" class="sidebar-link">Wasabi Wallet light node</a></li><li class="sidebar-sub-header"><a href="/why-wasabi/NetworkLevelPrivacy.html#wasabi-wallet-full-node" class="sidebar-link">Wasabi Wallet + full node</a></li></ul></li><li class="sidebar-sub-header"><a href="/why-wasabi/NetworkLevelPrivacy.html#universal-attacks" class="sidebar-link">Universal Attacks</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/why-wasabi/NetworkLevelPrivacy.html#protection" class="sidebar-link">Protection</a></li></ul></li></ul></li><li><a href="/why-wasabi/TransactionSurveillanceCompanies.html" class="sidebar-link">Transaction Surveillance Companies</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="network-level-privacy-bitcoin-core-vs-wasabi-wallet"><a href="#network-level-privacy-bitcoin-core-vs-wasabi-wallet" class="header-anchor">#</a> Network-Level Privacy - Bitcoin Core vs Wasabi Wallet</h1> <p>Bitcoin is a peer-to-peer network of full nodes that define, verify, and enforce the Bitcoin consensus rules.
There is a lot of communication between them and metadata can be used to de-anonymize Bitcoin users.</p> <p></p><div class="table-of-contents"><ul><li><a href="#problem">Problem</a><ul><li><a href="#clearnet-light-clients">Clearnet light clients</a></li></ul></li><li><a href="#wasabi-s-solution">Wasabi's solution</a><ul><li><a href="#full-node-by-default-block-filters-over-tor">Full node by default &amp; block filters over Tor</a></li></ul></li><li><a href="#in-depth-comparison">In-depth comparison</a><ul><li><a href="#bitcoin-core">Bitcoin Core</a></li><li><a href="#bitcoin-core-tor">Bitcoin Core + Tor</a></li><li><a href="#wasabi-wallet-light-node">Wasabi Wallet light node</a></li><li><a href="#wasabi-wallet-full-node">Wasabi Wallet + full node</a></li></ul></li><li><a href="#universal-attacks">Universal Attacks</a><ul><li><a href="#protection">Protection</a></li></ul></li></ul></div><p></p> <hr> <h2 id="problem"><a href="#problem" class="header-anchor">#</a> Problem</h2> <h3 id="clearnet-light-clients"><a href="#clearnet-light-clients" class="header-anchor">#</a> Clearnet light clients</h3> <p>When the communication to the network is unencrypted over clearnet, then there is an easy correlation of the Bitcoin transactions to the IP address of the peer who sent it.
The IP address can even be used to find the physical location of the user!</p> <p>A Bitcoin full node broadcasts not just the transactions of its user, but it also gossips all of the other transactions that it has received from its peers.
Thus it is very difficult to find out which transactions originated from which full node.
However, when a node or a wallet does not gossip all transactions, but only the transactions of its user, then it is easier to find out which node has sent those specific transactions.</p> <p>There are light wallets, which query a backend server to get information regarding specific addresses or use <a href="https://github.com/bitcoin/bips/blob/master/bip-0037.mediawiki" target="_blank" rel="noopener noreferrer">BIP 37<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> bloom filtering SPV wallet protocol, which is <a href="https://jonasnick.github.io/blog/2015/02/12/privacy-in-bitcoinj/" target="_blank" rel="noopener noreferrer">extremely bad for privacy<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.
And there is Electrum, which <a href="https://www.reddit.com/r/Bitcoin/comments/2feox9/electrum_securityprivacy_model/ck8szc0/" target="_blank" rel="noopener noreferrer">sends your addresses<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to random Electrum servers.</p> <div class="custom-block danger"><p class="custom-block-title">DANGER</p> <p>When the user sends the extended public key or a filter of all the addresses to the central server, then the server can <strong>COMPLETELY</strong> deanonymize the users.</p></div> <h2 id="wasabi-s-solution"><a href="#wasabi-s-solution" class="header-anchor">#</a> Wasabi's solution</h2> <h3 id="full-node-by-default-block-filters-over-tor"><a href="#full-node-by-default-block-filters-over-tor" class="header-anchor">#</a> Full node by default &amp; block filters over Tor</h3> <p>Wasabi checks if there is a local Tor instance installed, and if so, it uses this to onion-route all the traffic to and from the network.
If Tor is not already installed, then it is accessed automatically from within Wasabi.
This means that by default, all network communication is secured from outside snooping and the IP address is hidden.</p> <p>In order to fully verify everything, running a full node is essential.
If <a href="https://github.com/bitcoin/bitcoin" target="_blank" rel="noopener noreferrer">bitcoind<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is installed and run on the same computer as Wasabi, then it will automatically and by default connect to the full node.
It is also possible to connect Wasabi to a remote full node on another computer by specifying the local IP address or Tor onion service in the settings.
Then, Wasabi pulls the verified blocks and queries the mempool from the full node.</p> <div class="custom-block tip"><p class="custom-block-title">Wasabi ships with Bitcoin Knots!</p> <p>Wasabi has a <a href="/using-wasabi/BitcoinFullNode.html">partial Bitcoin Knots integration</a>.
This means that it is possible (but not mandatory) to start Bitcoin Knots during the launch of Wasabi, without having to install or configure anything manually.</p></div> <p>However, even if no full node is installed, Wasabi has a light client mode based on <a href="https://github.com/bitcoin/bips/blob/master/bip-0158.mediawiki" target="_blank" rel="noopener noreferrer">BIP 158 block filters<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.
The Wasabi server sends a filter of all the transactions in each block to all the users.
Then, users check locally if the block contains any transactions with their addresses.
If not, then the filter is stored for later reference, and no block is downloaded.
However, if there is a user transaction in that block, then Wasabi connects to a random Bitcoin P2P node over Tor and asks for this entire block, not only one transaction.
This block request is indistinguishable from the regular P2P gossip, and thus nobody, neither the server nor the full node, know which addresses belong to the user.</p> <div class="custom-block tip"><p class="custom-block-title">Privacy by default!</p> <p>Wasabi has network-level privacy as good as a Bitcoin full node.</p></div> <h2 id="in-depth-comparison"><a href="#in-depth-comparison" class="header-anchor">#</a> In-depth comparison</h2> <p>Furthermore, network-level privacy consists of two sub-categories.</p> <ul><li>Private UTXO Retrieval</li> <li>Private Transaction Broadcasting</li></ul> <h3 id="bitcoin-core"><a href="#bitcoin-core" class="header-anchor">#</a> Bitcoin Core</h3> <h4 id="private-utxo-retrieval"><a href="#private-utxo-retrieval" class="header-anchor">#</a> Private UTXO retrieval</h4> <p>Bitcoin Core downloads all the blocks ever created and establishes your wallet balances locally.
This is as good as it gets.</p> <h4 id="private-transaction-broadcasting"><a href="#private-transaction-broadcasting" class="header-anchor">#</a> Private transaction broadcasting</h4> <p>Bitcoin Core broadcasts transactions to other peers on the clearnet, unencrypted.
Other peers cannot figure out which transaction originates from a specific node because Core does not only broadcast its own transactions but also propagates every other transaction that hits its mempool.
However, some papers note it’s not bulletproof:</p> <blockquote><p>Bitcoin transaction propagation does not hide the source of a transaction very well, especially against a “supernode” eavesdropper that forms a large number of outgoing connections to reachable nodes on the network.
<a href="https://github.com/bitcoin/bips/blob/master/bip-0156.mediawiki" target="_blank" rel="noopener noreferrer">Dandelion: Privacy-Preserving Transaction Propagation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></blockquote> <h4 id="adversaries-identified"><a href="#adversaries-identified" class="header-anchor">#</a> Adversaries identified</h4> <ul><li>Malicious Peer</li> <li>Supernode</li></ul> <h3 id="bitcoin-core-tor"><a href="#bitcoin-core-tor" class="header-anchor">#</a> Bitcoin Core + Tor</h3> <p>You can use Bitcoin Core with Tor, which solves some of the above-mentioned issues.
In this case, a supernode cannot track back transactions to your IP address.</p> <p>An entity that can break Tor is a universal adversary, however, most Tor attacks are not possible if exit nodes are not involved.
It is reasonable to assume that this entity can break the onion routing, not Tor's encryption itself.</p> <h4 id="adversaries-identified-2"><a href="#adversaries-identified-2" class="header-anchor">#</a> Adversaries identified</h4> <ul><li>Tor breaker</li></ul> <h3 id="wasabi-wallet-light-node"><a href="#wasabi-wallet-light-node" class="header-anchor">#</a> Wasabi Wallet light node</h3> <h4 id="private-utxo-retrieval-2"><a href="#private-utxo-retrieval-2" class="header-anchor">#</a> Private UTXO retrieval</h4> <p>The backend server serves block filters to all the clients over Tor.
From those filters, the clients figure out which blocks they are interested in and download them [and some false positive blocks] from peers.
One block per peer, and always over a fresh Tor stream.
When a block is acquired, the peer gets disconnected.
Because of the end-to-end encryption of the onion network, it immediately defeats an ISP adversary and makes the already impossible job of the Sybil adversary even more impossible.
The only adversary that could possibly overcome this would have to setup thousands of full nodes over Tor and also break Tor itself.</p> <h4 id="private-transaction-broadcasting-2"><a href="#private-transaction-broadcasting-2" class="header-anchor">#</a> Private transaction broadcasting</h4> <p>All Wasabi traffic is tunneled through Tor.
Wasabi connects only to onion nodes, so end-to-end encryption is enforced between the wallet and peers.
All this without involving any exit node.
Wasabi connects to each peer through a different Tor stream.
A new Bitcoin peer is chosen for every transaction broadcast.</p> <div class="custom-block tip"><p class="custom-block-title">Everything over Tor!</p> <p>Wasabi broadcast transactions to only one peer over Tor, and immediately after that the peer is disconnected.</p></div> <h4 id="adversaries-identified-3"><a href="#adversaries-identified-3" class="header-anchor">#</a> Adversaries identified</h4> <ul><li>ISP</li> <li>Tor Breaker Sybil Attacker With Thousands Of Full Nodes Over Onion</li></ul> <h3 id="wasabi-wallet-full-node"><a href="#wasabi-wallet-full-node" class="header-anchor">#</a> Wasabi Wallet + full node</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Wasabi has a partial Bitcoin Knots integration.
This means that it is possible (but not mandatory) to start Bitcoin Knots during the launch of Wasabi, without having to install or configure anything manually.</p></div> <h4 id="private-utxo-retrieval-3"><a href="#private-utxo-retrieval-3" class="header-anchor">#</a> Private UTXO retrieval</h4> <p>If you have a listening full node running in the background (not only Bitcoin Core, any full node) then Wasabi automatically picks it up and instead of asking peers for blocks, it asks for blocks from your own node.
Using Wasabi this way results in the same privacy model as Bitcoin Core's, regarding Private UTXO Retrieval.</p> <h4 id="private-transaction-broadcasting-3"><a href="#private-transaction-broadcasting-3" class="header-anchor">#</a> Private transaction broadcasting</h4> <p>Even when Wasabi is connected to your own node, it will broadcast the transaction in the above-described way: to one new peer over Tor.</p> <h2 id="universal-attacks"><a href="#universal-attacks" class="header-anchor">#</a> Universal Attacks</h2> <p>Every time you use software that interacts with a Bitcoin network, and especially a Bitcoin node, you leave a sticky fingerprint in your traffic.
It comes in the form of a small but unavoidable spike in volume every time a new block is mined and the nodes start gossiping about it.
The blocks in Bitcoin are quite big, and the propagation speed is critical for consensus (greater delay means more frequent accidental forks), so such effect is predictable, and, in a sense, inherent to the Bitcoin architecture.</p> <p>Notably, the volume of block-related messages was drastically reduced since the introduction of Compact Block Relay (<a href="https://github.com/bitcoin/bips/blob/master/bip-0152.mediawiki" target="_blank" rel="noopener noreferrer">BIP 152<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.
Instead of requesting whole blocks, mostly consisting of transactions already known to the node, the peer informed of a new block is only requesting the missing transactions.
Yet the amount of extra communications in the seconds following a new block is still considerable.
This effect may not be noticeable for a single block, but over time it gets statistically significant and may get exploited.</p> <p>As reported by <a href="https://m417z.com/bitsniff/" target="_blank" rel="noopener noreferrer">Niko Kudriastev and Michael Maltsev<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, it is possible to detect Bitcoin communications using nothing but traffic volume over time - a piece of information even most privacy concerned individuals are likely leaking to their law-abiding Internet Service Provider.
In this case, using a VPN and running the node over Tor may not be enough to avoid being detected.</p> <h3 id="protection"><a href="#protection" class="header-anchor">#</a> Protection</h3> <p>There are many ways to go about it, but staying completely undetected is far from trivial - traditional privacy-enhancing tools mostly focus on the packet level, which is orthogonal to the technique.
Let’s break down the potential defense vectors.</p> <ul><li><p><strong>VPN / Tor</strong> - unlikely to affect the time series shape much, and therefore for larger traffic lengths the statistical significance of block-related spikes will inevitably become overwhelming.</p></li> <li><p><strong>Traffic mixing</strong> - for traffic volumes that are orders of magnitude higher than Bitcoin P2P communications, mixing is likely to be very effective.
That would, however, demand constant shielding of both upstream and downstream communications, and couldn't be done effectively by just running the node on a general-purpose machine - any noticeably long unshielded period may be enough for detection.</p></li> <li><p><strong>Being your own ISP</strong> - too spicy for most, but that should work.</p></li> <li><p><strong>Blockstream Satellite</strong> - the ultimate solution.
Eliminates the traffic analysis threat altogether.</p></li></ul> <p>Beyond active measures available now, both the privacy and the bandwidth efficiency of Bitcoin communications are actively worked on.
It is entirely possible that the messaging protocol will get to the point where block propagation doesn't trigger any significant spikes in traffic volume.</p> <p>You can read more about BitSniff <a href="https://79jke.github.io/BitSniff/" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and check the interactive demo <a href="https://m417z.com/bitsniff/" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <div data-id="9S8xsDq3PTU" class="ytEmbed" style="background-image:url(https://img.youtube.com/vi/9S8xsDq3PTU/hqdefault.jpg);"><iframe title="YouTube 9S8xsDq3PTU" data-src="https://www.youtube-nocookie.com/embed/9S8xsDq3PTU?&amp;autoplay=1&amp;autohide=1&amp;modestbranding=1&amp;color=white&amp;rel=0" frameborder="0" allow="autoplay;encrypted-media;picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/zkSNACKs/WasabiDoc/edit/master/docs/why-wasabi/NetworkLevelPrivacy.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/2/2022, 1:44:09 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/why-wasabi/TransactionGraph.html" class="prev">
        Transaction Graph
      </a></span> <span class="next"><a href="/why-wasabi/TransactionSurveillanceCompanies.html">
        Transaction Surveillance Companies
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.d3cd784f.js" defer></script><script src="/assets/js/3.91299871.js" defer></script><script src="/assets/js/50.500e7fd2.js" defer></script>
  </body>
</html>

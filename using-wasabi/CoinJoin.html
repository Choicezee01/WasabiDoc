<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>CoinJoin | Wasabi Docs</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#211b24">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata:400,700|Playfair+Display:700&amp;display=swap">
    <meta name="description" content="A step by step guide on how to do Wasabi CoinJoins. This is the Wasabi documentation, an archive of knowledge about the open-source, non-custodial and privacy-focused Bitcoin wallet for desktop.">
    <meta name="msapplication-TileColor" content="#211b24">
    <meta name="theme-color" content="#211b24">
    
    <link rel="preload" href="/assets/css/0.styles.490d69e3.css" as="style"><link rel="preload" href="/assets/js/app.e8b673ca.js" as="script"><link rel="preload" href="/assets/js/3.91299871.js" as="script"><link rel="preload" href="/assets/js/28.d50cf8a1.js" as="script"><link rel="prefetch" href="/assets/js/10.cc7a8f66.js"><link rel="prefetch" href="/assets/js/11.8ac35860.js"><link rel="prefetch" href="/assets/js/12.c80333c0.js"><link rel="prefetch" href="/assets/js/13.dd08c85f.js"><link rel="prefetch" href="/assets/js/14.05191118.js"><link rel="prefetch" href="/assets/js/15.35b22d61.js"><link rel="prefetch" href="/assets/js/16.258ec5ad.js"><link rel="prefetch" href="/assets/js/17.ca623a3c.js"><link rel="prefetch" href="/assets/js/18.65aab39e.js"><link rel="prefetch" href="/assets/js/19.a6a58295.js"><link rel="prefetch" href="/assets/js/20.2932ab0b.js"><link rel="prefetch" href="/assets/js/21.92ddcd4e.js"><link rel="prefetch" href="/assets/js/22.357f1a49.js"><link rel="prefetch" href="/assets/js/23.47c4d18e.js"><link rel="prefetch" href="/assets/js/24.20433b31.js"><link rel="prefetch" href="/assets/js/25.257ecfe8.js"><link rel="prefetch" href="/assets/js/26.8567ffb3.js"><link rel="prefetch" href="/assets/js/27.6eeccf01.js"><link rel="prefetch" href="/assets/js/29.3acc7061.js"><link rel="prefetch" href="/assets/js/30.ed3c2809.js"><link rel="prefetch" href="/assets/js/31.93e9c22f.js"><link rel="prefetch" href="/assets/js/32.cd0a1735.js"><link rel="prefetch" href="/assets/js/33.a5f59047.js"><link rel="prefetch" href="/assets/js/34.f07c35c6.js"><link rel="prefetch" href="/assets/js/35.1ee1edb0.js"><link rel="prefetch" href="/assets/js/36.0b42a5d9.js"><link rel="prefetch" href="/assets/js/37.052b4455.js"><link rel="prefetch" href="/assets/js/38.d80422b5.js"><link rel="prefetch" href="/assets/js/39.8cf58b98.js"><link rel="prefetch" href="/assets/js/4.ca8af797.js"><link rel="prefetch" href="/assets/js/40.85855576.js"><link rel="prefetch" href="/assets/js/41.8cd20ee5.js"><link rel="prefetch" href="/assets/js/42.1090244d.js"><link rel="prefetch" href="/assets/js/43.3b8a25ac.js"><link rel="prefetch" href="/assets/js/44.71568bbd.js"><link rel="prefetch" href="/assets/js/45.e9b3b3d9.js"><link rel="prefetch" href="/assets/js/46.cf64367f.js"><link rel="prefetch" href="/assets/js/47.ca3a769d.js"><link rel="prefetch" href="/assets/js/48.d259d3d9.js"><link rel="prefetch" href="/assets/js/49.917b85ba.js"><link rel="prefetch" href="/assets/js/5.33d7afcb.js"><link rel="prefetch" href="/assets/js/50.670abd29.js"><link rel="prefetch" href="/assets/js/51.0cbb4de8.js"><link rel="prefetch" href="/assets/js/52.bf07c6c2.js"><link rel="prefetch" href="/assets/js/53.e97a3afe.js"><link rel="prefetch" href="/assets/js/54.4ae08a7e.js"><link rel="prefetch" href="/assets/js/55.6621d6e6.js"><link rel="prefetch" href="/assets/js/6.119d0441.js"><link rel="prefetch" href="/assets/js/7.6404862f.js"><link rel="prefetch" href="/assets/js/8.354ea820.js"><link rel="prefetch" href="/assets/js/9.4ae0bfcb.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.25c53924.js">
    <link rel="stylesheet" href="/assets/css/0.styles.490d69e3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/Logo_without_text.png" alt="Wasabi Docs" class="logo"> <span class="site-name can-hide">Wasabi Docs</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/why-wasabi/" class="nav-link">
  Why Wasabi
</a></div><div class="nav-item"><a href="/using-wasabi/" class="nav-link router-link-active">
  Using Wasabi
</a></div><div class="nav-item"><a href="/building-wasabi/" class="nav-link">
  Building Wasabi
</a></div><div class="nav-item"><a href="/FAQ/" class="nav-link">
  FAQ
</a></div><div class="nav-item"><a href="/glossary/" class="nav-link">
  Glossary
</a></div> <a href="https://github.com/zkSNACKs/WasabiDoc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/why-wasabi/" class="nav-link">
  Why Wasabi
</a></div><div class="nav-item"><a href="/using-wasabi/" class="nav-link router-link-active">
  Using Wasabi
</a></div><div class="nav-item"><a href="/building-wasabi/" class="nav-link">
  Building Wasabi
</a></div><div class="nav-item"><a href="/FAQ/" class="nav-link">
  FAQ
</a></div><div class="nav-item"><a href="/glossary/" class="nav-link">
  Glossary
</a></div> <a href="https://github.com/zkSNACKs/WasabiDoc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Introducing Wasabi</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/using-wasabi/ELI5.html" class="sidebar-link">Explain Wasabi like I'm 5</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Installing Wasabi</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/using-wasabi/InstallPackage.html" class="sidebar-link">Install-package</a></li><li><a href="/using-wasabi/BuildSource.html" class="sidebar-link">Build from source code</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Using Wasabi</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/using-wasabi/WalletGeneration.html" class="sidebar-link">Wallet Generation</a></li><li><a href="/using-wasabi/WalletLoad.html" class="sidebar-link">Wallet Load</a></li><li><a href="/using-wasabi/Receive.html" class="sidebar-link">Receive</a></li><li><a href="/using-wasabi/CoinJoin.html" aria-current="page" class="active sidebar-link">CoinJoin</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/using-wasabi/CoinJoin.html#doing-coinjoin-step-by-step" class="sidebar-link">Doing CoinJoin step-by-step</a></li><li class="sidebar-sub-header"><a href="/using-wasabi/CoinJoin.html#zerolink-protocol-step-by-step" class="sidebar-link">ZeroLink protocol step-by-step</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/using-wasabi/CoinJoin.html#input-registration" class="sidebar-link">Input registration</a></li><li class="sidebar-sub-header"><a href="/using-wasabi/CoinJoin.html#connection-confirmation" class="sidebar-link">Connection confirmation</a></li><li class="sidebar-sub-header"><a href="/using-wasabi/CoinJoin.html#output-registration" class="sidebar-link">Output registration</a></li><li class="sidebar-sub-header"><a href="/using-wasabi/CoinJoin.html#signing" class="sidebar-link">Signing</a></li><li class="sidebar-sub-header"><a href="/using-wasabi/CoinJoin.html#broadcasting" class="sidebar-link">Broadcasting</a></li></ul></li><li class="sidebar-sub-header"><a href="/using-wasabi/CoinJoin.html#wasabi-coinjoin-examples" class="sidebar-link">Wasabi CoinJoin examples</a></li></ul></li><li><a href="/using-wasabi/Send.html" class="sidebar-link">Send</a></li><li><a href="/using-wasabi/ColdWasabi.html" class="sidebar-link">Hardware Wallet</a></li><li><a href="/using-wasabi/BitcoinFullNode.html" class="sidebar-link">Bitcoin Full Node</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Best Practices</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/using-wasabi/PasswordBestPractices.html" class="sidebar-link">Password Best Practices</a></li><li><a href="/using-wasabi/BackupBestPractices.html" class="sidebar-link">Backup Best Practices</a></li><li><a href="/using-wasabi/ChangeCoins.html" class="sidebar-link">Change Coins</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Restoring Wasabi</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/using-wasabi/WalletRecovery.html" class="sidebar-link">Recover a Wallet</a></li><li><a href="/using-wasabi/RestoreElectrum.html" class="sidebar-link">Restoring Wasabi Wallet in Electrum</a></li><li><a href="/using-wasabi/PasswordFinder.html" class="sidebar-link">Password Finder</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Advanced Installing Wasabi</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/using-wasabi/DeterministicBuild.html" class="sidebar-link">Deterministic Build</a></li><li><a href="/using-wasabi/WasabiSetupVM.html" class="sidebar-link">Wasabi Setup in Virtual Machines</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Advanced Using Wasabi</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/using-wasabi/RPC.html" class="sidebar-link">RPC Interface</a></li><li><a href="/using-wasabi/DiscreetMode.html" class="sidebar-link">Discreet Mode</a></li><li><a href="/using-wasabi/PayJoin.html" class="sidebar-link">PayJoin</a></li><li><a href="/using-wasabi/Testnet.html" class="sidebar-link">Testnet</a></li><li><a href="/using-wasabi/BIPs.html" class="sidebar-link">Supported BIPs</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="coinjoin"><a href="#coinjoin" class="header-anchor">#</a> CoinJoin</h1> <p>A <a href="https://en.bitcoin.it/Privacy#CoinJoin" target="_blank" rel="noopener noreferrer">CoinJoin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is a special Bitcoin transaction where several peers get together to literally join their coins in a single transaction.
They collaboratively build a transaction where each of them provides some coins as inputs, and fresh addresses as outputs.
The concept has been around since the early days of Bitcoin, and it was formalized by the great Greg Maxwell in <a href="https://bitcointalk.org/index.php?topic=279249.msg2983902" target="_blank" rel="noopener noreferrer">this awesome introductory thread<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>The goal is to gain privacy by breaking the link of which input &quot;pays&quot; which output so that any of the outputs cannot be attributed to the owner of the input.
Therefore, it is very important that the values of the outputs are exactly equal.
Wasabi enables trustless (meaning nobody can steal) and private (meaning even the coordinator cannot spy) Schnorr blind signature CoinJoin according to the <a href="https://github.com/nopara73/zerolink" target="_blank" rel="noopener noreferrer">ZeroLink fungibility framework<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p></p><div class="table-of-contents"><ul><li><a href="#doing-coinjoin-step-by-step">Doing CoinJoin step-by-step</a></li><li><a href="#zerolink-protocol-step-by-step">ZeroLink protocol step-by-step</a><ul><li><a href="#input-registration">Input registration</a></li><li><a href="#connection-confirmation">Connection confirmation</a></li><li><a href="#output-registration">Output registration</a></li><li><a href="#signing">Signing</a></li><li><a href="#broadcasting">Broadcasting</a></li></ul></li><li><a href="#wasabi-coinjoin-examples">Wasabi CoinJoin examples</a></li></ul></div><p></p> <hr> <h2 id="doing-coinjoin-step-by-step"><a href="#doing-coinjoin-step-by-step" class="header-anchor">#</a> Doing CoinJoin step-by-step</h2> <ol><li>Launch Wasabi, and open your wallet that contains the coins that you want to CoinJoin.
Notice that it is not yet possible to CoinJoin from a hardware wallet, the keys must be &quot;hot&quot; on your computer.
Then click on the <code>CoinJoin</code> tab, either from the top tabs or the right-side <code>Wallet Explorer</code>.</li></ol> <p><img src="/CoinJoin.png" alt="Wasabi Wallet CoinJoin tab" title="Wasabi Wallet CoinJoin tab"></p> <ol start="2"><li><p>Select up to seven coins for coinjoining by clicking the checkbox in the coin list.
The selected value must be above the minimum required amount, currently roughly <code>0.1 bitcoin</code>.</p> <div class="custom-block danger"><p class="custom-block-title">Consolidation is not good for privacy</p> <p>Try not to select coins with different privacy shields (different anonymity sets) to CoinJoin in the same round.
This is because the coins with the higher anonymity set will lose some of their anonymity set, to equal the anonymity set of the lower ones.
The best option would be to select coins with the same anonymity set.</p></div></li> <li><p>Specify anonymity set target.
Wasabi will automatically re-register your coin for the next round until this target is reached.
You can easily toggle between three levels by clicking on the shield.
You can also <a href="/FAQ/FAQ-UseWasabi.html#how-can-i-change-the-anonset-target">change the value</a> of the three shields in the settings.</p></li></ol> <p><img src="/CoinJoinAnonsetTargetYellow.png" alt="Wasabi Wallet yellow anonymity set target" title="Wasabi Wallet yellow anonymity set target"> <img src="/CoinJoinAnonsetTargetGreen.png" alt="Wasabi Wallet green anonymity set target" title="Wasabi Wallet green anonymity set target"> <img src="/CoinJoinAnonsetTargetCheck.png" alt="Wasabi Wallet green checkmark anonymity set target" title="Wasabi Wallet green checkmark anonymity set target"></p> <ol start="4"><li>Enter your password and click <code>Enqueue Selected Coins</code>.
You only have to enter your password for the first round of mixing, as any automatic re-mix rounds are done without requiring a password input.</li></ol> <p><img src="/CoinJoinCoinsBeingCoinJoined.png" alt="Wasabi Wallet CoinJoin process" title="Wasabi Wallet CoinJoin process"></p> <ol start="5"><li>Now, wait until the CoinJoin is complete.
The round starts either as soon as 100 peers have registered their coins, or after one hour has elapsed since the last round.
From now on there is no more user input required.
Just leave Wasabi running in the background of your computer.</li></ol> <p><img src="/CoinJoinStatus.png" alt="Wasabi Wallet CoinJoin status" title="Wasabi Wallet CoinJoin status"></p> <ol start="6"><li>When the CoinJoin is finished, and the CoinJoin transaction is broadcast, you will receive at least one anonymity set coin <img src="/ShieldCheckmark.png" alt="Wasabi Wallet green checkmark shield" class="shield"> <img src="/ShieldGreen.png" alt="Wasabi Wallet green shield" class="shield"> <img src="/ShieldYellow.png" alt="Wasabi Wallet yellow shield" class="shield">, and possibly non-private change <img src="/ShieldRed.png" alt="Wasabi Wallet red shield" class="shield">.</li></ol> <h2 id="zerolink-protocol-step-by-step"><a href="#zerolink-protocol-step-by-step" class="header-anchor">#</a> ZeroLink protocol step-by-step</h2> <h3 id="input-registration"><a href="#input-registration" class="header-anchor">#</a> Input registration</h3> <p>During the <a href="/FAQ/FAQ-UseWasabi.html#what-is-happening-in-the-input-registration-phase">input registration</a>, you select which coins you want to register for CoinJoin.
These coins need to be confirmed on the Bitcoin blockchain unless they are from a Wasabi CoinJoin and you re-register them.
In the background, Wasabi generates an input proof, a signature over a challenge message with the private key that locks up the coins.
With this, the coordinator can verify that you actually own these coins.</p> <p>Then your Wasabi client generates several fresh addresses, depending on the value of inputs registered.
The address of the anonset CoinJoin output must not be linked to your input, and thus it is <a href="https://en.wikipedia.org/wiki/Blind_signature" target="_blank" rel="noopener noreferrer">cryptographically blinded<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to incomprehensible cypher-text.
Since the change output can be easily linked to your input with <a href="/FAQ/FAQ-GeneralBitcoinPrivacy.html#what-is-a-coinjoin-sudoku">CoinJoin Sudoku</a>, this address is not blinded but kept in cleartext.</p> <p>Wasabi wallet generates a new <a href="https://tb-manual.torproject.org/managing-identities/" target="_blank" rel="noopener noreferrer">Tor identity<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> called <strong>Alice</strong>.
She is a separate entity, and for every round you use a new Alice who is not linked to any previous connection.
With Alice, you send some information to the Wasabi coordinator server:</p> <ul><li>The input coins that you want to register, together with the input proof signature.</li> <li>The cleartext change address.</li> <li>The blinded anonset CoinJoin output.</li></ul> <p>The Wasabi coordinator now verifies that:</p> <ul><li>There is still room for more peers on this CoinJoin.</li> <li>The blinded output has never been registered before.</li> <li>Each input has not been registered before, is not banned, is unspent, and that the input proof is valid.</li> <li>That the sum value of inputs is higher than the minimum required value of roughly 0.1 bitcoin.</li></ul> <p>Only when all these checks are valid does the coordinator sign the blinded output.
He does not know the address that he is signing, because it is blinded cypher-text.
This signature is proof that the coordinator has verified that Alice is not cheating.
The coordinator sends the signed blinded output back to Alice, together with a uniqueID that is the identifier of this specific Alice in this round.</p> <p>Alice has the secret parameters needed to unblind the signed, blinded output.
With the magic of cryptography, she can reveal the cleartext address of the anonset CoinJoin output.
However, the coordinator signature is still attached to this address.</p> <p>The input registration phase ends when either: the number of registered inputs exceeds the number of required inputs (meaning anonymity set of 100 peers), or when the time elapsed since the previous round reaches one hour.</p> <div data-id="v1fIjFR6e5Q" class="ytEmbed" style="background-image:url(https://img.youtube.com/vi/v1fIjFR6e5Q/hqdefault.jpg);"><iframe title="YouTube v1fIjFR6e5Q" data-src="https://www.youtube-nocookie.com/embed/v1fIjFR6e5Q?&amp;autoplay=1&amp;autohide=1&amp;modestbranding=1&amp;color=white&amp;rel=0" frameborder="0" allow="autoplay;encrypted-media;picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <h3 id="connection-confirmation"><a href="#connection-confirmation" class="header-anchor">#</a> Connection confirmation</h3> <p>There are many Alices (different users) registering their inputs in the first phase, and this takes a while, up to one hour.
The connection confirmation phase makes sure that all of them are still online and ready to continue.
The coordinator verifies the unique ID from all the Alices, and when everyone is still communicating, the coordinator returns the round hash of all the registered inputs.</p> <p>The round is abandoned and re-started if too many Alices have dropped, for example when their Wasabi is shut down, or when their Tor connection is temporarily broken.
The connection confirmation phase ends when all Alices have provided their unique ID, or after a timeout when the number of online Alices is still larger than the required number of peers.</p> <div data-id="hhkL0QvIaGY" class="ytEmbed" style="background-image:url(https://img.youtube.com/vi/hhkL0QvIaGY/hqdefault.jpg);"><iframe title="YouTube hhkL0QvIaGY" data-src="https://www.youtube-nocookie.com/embed/hhkL0QvIaGY?&amp;autoplay=1&amp;autohide=1&amp;modestbranding=1&amp;color=white&amp;rel=0" frameborder="0" allow="autoplay;encrypted-media;picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <h3 id="output-registration"><a href="#output-registration" class="header-anchor">#</a> Output registration</h3> <p>Now that all peers are online, we are ready to proceed with the <a href="/FAQ/FAQ-UseWasabi.html#what-is-happening-in-the-output-registration-phase">output registration phase</a> of the round.
Your Wasabi client generates a completely new Tor identity <strong>Bob</strong>, who is in no way tied to Alice.
Bob sends to the Wasabi coordinator:</p> <ul><li>The cleartext address for the anonset CoinJoin output.</li> <li>The coordinator signature over that output.</li> <li>The round hash of all the inputs.</li></ul> <p>Because the coordinator can verify his own signature, he knows that this output was initially sent by any Alice (he cannot know which Alice exactly) and that he has verified that everything is in order.</p> <p>It is very important that the coordinator cannot link Alice to Bob.
Because Alice has sent the cleartext input, and Bob sends the cleartext output.
So, if the two were to be linked, then the coordinator can specifically link the input to the output, meaning that the anonymity set is 1.
Because Alice commits to the output by sending it blinded, and because Bob is a new Tor identity not linked to Alice, the coordinator can verify that nobody is cheating, but he cannot deanonymize the peers.</p> <p>The output registration phase ends when the value of cleartext outputs plus change outputs is equal to the value of inputs, meaning all Bobs have registered.
If after a timeout not all outputs are registered, then this round is abandoned, the missing peers are banned, and a new round is started.</p> <h3 id="signing"><a href="#signing" class="header-anchor">#</a> Signing</h3> <p>Now that all inputs and outputs are registered, the Wasabi coordinator can start the <a href="/FAQ/FAQ-UseWasabi.html#what-is-happening-in-the-signing-phase">signing phase</a> by building the CoinJoin transaction with all the registered inputs, the anonset outputs, the change outputs and the coordinator fee output.
He sends this transaction to all the Alices of this round.
Each Alice verifies that:</p> <ul><li>The committed round hash is equal to the hash of all the inputs in the proposed transaction.</li> <li>Her inputs and outputs are correctly included.</li></ul> <p>She then signs the transaction with the private keys of her inputs.
Alice sends the uniqueID, the signature, and the input index to the coordinator, who then verifies this information.</p> <p>The signing phase ends when the coordinator has received all the valid signatures for all the registered inputs.</p> <h3 id="broadcasting"><a href="#broadcasting" class="header-anchor">#</a> Broadcasting</h3> <p>The CoinJoin transaction has been successfully built and signed, and it is now ready to be <a href="/FAQ/FAQ-UseWasabi.html#what-is-happening-in-the-broadcasting-phase">broadcasted</a> to the peers of the Bitcoin network.
The coordinator sends this transaction over the Tor network to random Bitcoin P2P nodes, and from there it is gossiped to other nodes and miners.
Wasabi saves on mining fees by setting a confirmation target of roughly 12 hours, but you can re-register unconfirmed anonset outputs for the next round of CoinJoin.</p> <h2 id="wasabi-coinjoin-examples"><a href="#wasabi-coinjoin-examples" class="header-anchor">#</a> Wasabi CoinJoin examples</h2> <p>Here's a list of Wasabi CoinJoin examples and how they appear on a block explorer:</p> <ul><li><a href="https://blockstream.info/tx/e4a789d16a24a6643dfee06e018ad27648b896daae6a3577ae0f4eddcc4d9174" target="_blank" rel="noopener noreferrer">e4a789d16a24a6643dfee06e018ad27648b896daae6a3577ae0f4eddcc4d9174<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> | <a href="http://explorerzydxu5ecjrkwceayqybizmpjjznk5izmitf2modhcusuqlid.onion/tx/e4a789d16a24a6643dfee06e018ad27648b896daae6a3577ae0f4eddcc4d9174" target="_blank" rel="noopener noreferrer">.onion version<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blockstream.info/tx/c69aed505ca50473e2883130221915689c1474be3c66bcf7ac7dc0e26246afc8" target="_blank" rel="noopener noreferrer">c69aed505ca50473e2883130221915689c1474be3c66bcf7ac7dc0e26246afc8<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> | <a href="http://explorerzydxu5ecjrkwceayqybizmpjjznk5izmitf2modhcusuqlid.onion/tx/c69aed505ca50473e2883130221915689c1474be3c66bcf7ac7dc0e26246afc8" target="_blank" rel="noopener noreferrer">.onion version<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blockstream.info/tx/ef329b3ed8e790f10f0b522346f1b3d9f1c9d45dfa5b918e92d6f0a25d91c7ce" target="_blank" rel="noopener noreferrer">ef329b3ed8e790f10f0b522346f1b3d9f1c9d45dfa5b918e92d6f0a25d91c7ce<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> | <a href="http://explorerzydxu5ecjrkwceayqybizmpjjznk5izmitf2modhcusuqlid.onion/tx/ef329b3ed8e790f10f0b522346f1b3d9f1c9d45dfa5b918e92d6f0a25d91c7ce" target="_blank" rel="noopener noreferrer">.onion version<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blockstream.info/tx/f82206145413db5c1272d5609c88581c414815e36e400aee6410e0de9a2d46b5" target="_blank" rel="noopener noreferrer">f82206145413db5c1272d5609c88581c414815e36e400aee6410e0de9a2d46b5<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> | <a href="http://explorerzydxu5ecjrkwceayqybizmpjjznk5izmitf2modhcusuqlid.onion/tx/f82206145413db5c1272d5609c88581c414815e36e400aee6410e0de9a2d46b5" target="_blank" rel="noopener noreferrer">.onion version<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blockstream.info/tx/a7157780b7c696ab24767113d9d34cdbc0eba5c394c89aec4ed1a9feb326bea5" target="_blank" rel="noopener noreferrer">a7157780b7c696ab24767113d9d34cdbc0eba5c394c89aec4ed1a9feb326bea5<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> | <a href="http://explorerzydxu5ecjrkwceayqybizmpjjznk5izmitf2modhcusuqlid.onion/tx/a7157780b7c696ab24767113d9d34cdbc0eba5c394c89aec4ed1a9feb326bea5" target="_blank" rel="noopener noreferrer">.onion version<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/zkSNACKs/WasabiDoc/edit/master/docs/using-wasabi/CoinJoin.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/1/2020, 9:41:49 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/using-wasabi/Receive.html" class="prev">
        Receive
      </a></span> <span class="next"><a href="/using-wasabi/Send.html">
        Send
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.e8b673ca.js" defer></script><script src="/assets/js/3.91299871.js" defer></script><script src="/assets/js/28.d50cf8a1.js" defer></script>
  </body>
</html>
